function jsunit()
{
	return 'it works';
}

var cm_opened = 0;

function send_form_pop( formid )
{
	$(formid).set( 'send' , {onSuccess:function( ret ){ set_float_box( ret ) },evalScripts: true} );
	$(formid).send();
}


function send_form( formname )
{
	$(formname).set( 'send' , {onSuccess:function( ret ){ show_result( ret , formname ) },evalScripts: true} );
	$(formname).send();
}


function show_result( ret , formname )
{
	if( ret != '' )
	{
		if( !$('riki_notice_div') && formname != '' )
		{
			var odiv = new Element( 'div' , {id:'riki_notice_div'} );
			//odiv.addClass('cunotice');
			odiv.innerHTML = ret ;
			odiv.inject( $(formname) , 'top' );
		}
		else
		{
			$('riki_notice_div').set( 'html' , ret ); 
		}
		
		$('riki_notice_div').set( 'styles' , {display:'block'} ); 	
	}
	else
	{
		if( $('riki_notice_div') )
		{
			$('riki_notice_div').set( 'styles' , {display:'none'} ); 
		}
	}	
}

function center_it( name )
{
	var size = $(name).getSize();
	$(name).setStyle( 'left' , get_center_left(size.x) +'px');
	var top = parseInt(get_center_top(size.y)) - 50;
	if( top < 100 ) top = 100;
	$(name).setStyle( 'top' , top +'px');
}


function get_center_top( window_h )
{
	return window.getScrollTop() + ((document.documentElement.clientHeight-window_h)/2);
}

function get_center_left( window_w )
{
	return window.getScrollLeft() + ((window.getWidth()-window_w)/2);
}

function show_float_box( url )
{
	if( !$('riki_float_box') )
	{
		var cdiv = new Element( 'div' , {id:'riki_float_box'} );
		cdiv.inject(document.body,'top');
	}
	/*
	if( !$('riki_float_box_bg') )
	{
		var cdiv = new Element( 'div' , {id:'riki_float_box_bg'} );
		cdiv.inject(document.body,'top');
	}
	*/
	if( url )
	{
		$('riki_float_box').set( 'load' , {onSuccess:function(){ $('riki_float_box').set( 'styles' , {display:'block'} );
		center_it('riki_float_box'); },evalScripts: true} );
		center_it('riki_float_box');
		$('riki_float_box').set( 'html' , '<div style="padding:10px;padding-top:30px;padding-bottom:30px"><center><img src="static/image/float_loading.gif" /></center></div>' );
		
		$('riki_float_box').load(url);
	}
	else
	{
		$('riki_float_box').set( 'styles' , {display:'block'} );
		center_it('riki_float_box');
	}
		
		
	
	/*
	$('riki_float_box_bg').set( 'styles' , {display:'block' , height:'400px'} );
	center_it('riki_float_box_bg');
	*/
}

function set_float_box( text )
{
	if( !$('riki_float_box') )
	{
		var cdiv = new Element( 'div' , {id:'riki_float_box'} );
		cdiv.inject(document.body,'top');
	}
	$('riki_float_box').set( 'html' , text );		
	$('riki_float_box').set( 'styles' , {display:'block'} );
	center_it('riki_float_box');
}

function close_float_box()
{
	$('riki_float_box').set( 'styles' , {display:'none'} );
}






